# principle

[toc]

## 总则

* 只用cassandra做所有业务,因为其好维护. 因为其: scale，读写速度快。

## faq

### 如何一次graphql请求只请求需要渲染的数据，而不是全部数据,客户端和服务端的model要怎么组织

* fragment

是要为每个页面写fragment吗？
这样数据就和view比较耦合在一块了。好处在于仅仅需要渲染的数据
但是这种情况库要怎么写

getPreviewData
getDetailData
每个页面的数据其实都有一个抽象，然后通过库接口去获取

服务端对于这种情况，是否只需要写一个全量的数据

### 如何缓存上次已经请求的数据，如果其没变化的话，就不返回数据，通过cache数据直接去渲染

* cache 

这个就和服务器没什么关系

### 数组数据要怎么判断是否增加成员，减少成员或者更新成员而不是每次都是去全量拿数据

* pagination

是否也适用于缓存机制。如果没变不管。如果变了，去获取差异的地方：增加，减少，更新

### 是否有必要实时监听所有修改，实时同步渲染。还是仅仅部分诸如：新消息/新好友等重要的几个消息才走订阅通知

* subscription

这种也主要针对多设备多终端情况
而且要结合cache情况看